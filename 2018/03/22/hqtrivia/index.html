<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!--Favicon set-->
  <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="/manifest.json">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="theme-color" content="#ffffff">

  <title>Dylan Huang | Solving HQTrivia with machine learning</title>
  <meta name="author" content="Dylan Huang">
  <meta name="description" content="Web enthusiast, Computer Engineer, Dog Lover">
  <meta property="og:title" content="Solving HQTrivia with machine learning | Dylan Huang">
  <meta property="og:url" content="dylanhuang.com/2018/03/22/hqtrivia/">
  <meta property="og:site_name" content="Dylan Huang">
  <meta property="og:description" content="Web enthusiast, Computer Engineer, Dog Lover">
  <meta property="og:image" content="/assets/image/hqtrivia/main.jpg">
  <meta property="og:type" content="blog">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:description" content="Web enthusiast, Computer Engineer, Dog Lover">
  <meta name="twitter:title" content="Solving HQTrivia with machine learning | Dylan Huang">
  <meta name="twitter:url" content="dylanhuang.com/2018/03/22/hqtrivia/">
  <meta name="twitter:site" content="Dylan Huang">
  <meta name="twitter:creator" content="@https://twitter.com/dhuangster">
  <meta name="twitter:domain" content="dylanhuang.com">
  <meta property="twitter:image" content="/assets/image/hqtrivia/main.jpg">

  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata|Lora|Space+Mono:700">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css">
  <link rel="stylesheet" href="/css/main.css">

  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/octicons/2.0.2/octicons.min.css">

  <link rel="stylesheet" href="https://cdn.rawgit.com/konpa/devicon/4f6a4b08efdad6bb29f9cc801f5c07e263b39907/devicon.min.css">

  <link rel="alternate" type="application/rss+xml" title="Dylan Huang" href="dylanhuang.com/feed.xml">
  <link rel="canonical" href="dylanhuang.com/2018/03/22/hqtrivia/">

  
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-82333002-2', 'auto');
      ga('send', 'pageview');
    </script>
  
</head>


  <body>

    <main>
      <article itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="section-padding--lg mast">
    <a class="nav nav--white" href="/">
      <i class="fa fa-lg fa-arrow-left"></i>
      <span>Back</span>
    </a>
    <figure class="absolute-bg mast__img" style="background-image: url('/assets/image/hqtrivia/main.jpg');"></figure>
    <div class="mast__container">
      <span>
        <time datetime="2018-03-22T00:00:00-07:00" itemprop="datePublished">Mar 22, 2018</time>
        
        <i class="devicon-python-plain-wordmark colored"></i>
        
      </span>
      <h1 itemprop="name headline">Solving HQTrivia with machine learning</h1>
        <span>
          University of Illinois at Urbana–Champaign
        </span>
      <span></span>
    </div>
  </header>

  <section class="section-padding post" itemprop="articleBody">
    <h2 id="motivation">Motivation</h2>
<p>During the winter break of 2017, I decided to work on a project that would make
me learning something new. Inspired by this
<a href="https://mux.com/blog/how-we-used-machine-learning-to-predict-hq-trivia-answers/">article</a>,
I decided to make my own trivia solver based on the trending HQTrivia app. In
the following section, I am going to outline the approach that I designed and
implemented.</p>

<h2 id="high-level-approach">High-level approach</h2>
<p>If you have not played HQTrivia, the idea is to answer a multiple choice trivia
question in under 10 seconds. If you can answer 12 questions in a row, you win a
cash prize!</p>

<h3 id="getting-the-data">getting the data</h3>
<p>The first thing that I needed to do was to find out how to grab the
HQTrivia data. A lot of people used OCR along with hooking up their phone
to their computer. But I figured there had to be a better way. After some
research, I found someone who had sniffed the packets coming from their phone
while the HQTrivia app was open and found out that HQTrivia serves their
questions through a websocket connection (I had to learn how to use websockets).
After doing the same thing, I was able to discover the schema and HQTrivia’s
schema for questions. To do the packet sniffing, I used a web debugging proxy
called <a href="https://www.charlesproxy.com/">Charles</a> and proxied my phone’s network
through my computer.</p>

<h3 id="choosing-the-model">choosing the model</h3>
<p>The next thing I knew was that I wanted to use some sort of machine learning
model to solve the questions (lol buzz words), but I had no previous experience using a model to
solve anything. The first thing I did was learn about what exactly a “model” is,
what models currently exist, and what the hell a feature is.</p>

<p>After learning about my options for a model, I decided on using a decision tree
with gradient boosting from the
<a href="https://www.google.com/search?num=20&amp;ei=Iv5LW-OuLpDcswW3nIygAg&amp;btnG=Search&amp;q=light+gbm">LightGBM</a>
by Microsoft because it was proven to be better than
<a href="https://github.com/dmlc/xgboost">xgboost</a>, but xgboost has proven to be
extremely effective in machine learning competitions that require quick
learning, classification, or learning on small amounts of data (due to gradient
boosting).</p>

<h3 id="creating-the-features">creating the features</h3>
<p>The next step was for me to create features. Below is a list of features that I
designed using Google and Bing searches:</p>
<ul>
  <li>Google search each answer and count number of occurences for each evaluated important word</li>
  <li>Bing search each answer and count number of occurences for each evaluated important word</li>
  <li>Google question and each answer, create document corpus from each answer search, compare cosine similarity of question search to corpus</li>
  <li>Google search each important word and count number of occurences for each answer</li>
  <li>Bing search each important word and count number of occurences for each answer</li>
  <li>Google question with each answer appended and count number of search results</li>
  <li>Google question with each answer appended and count number of search results</li>
  <li>Google important words with each answer appended and count number of search results</li>
  <li>Google noun chunks with each answer appended and count number of search results</li>
  <li>Wikipedia search each answer and count number of occurences for each evaluated important word</li>
  <li>Google question with each answer appended in quotes and count occurences of each answer</li>
  <li>Bing search question with each answer appended in quotes and count occurences of each answer</li>
  <li>Google question with each answer appended in quotes and count occurences of each important word</li>
  <li>Google evaluated noun chunks of question and count occurences of each answer</li>
  <li>Google the question and count occurences of each answer</li>
</ul>

<h2 id="annoying-thing">Annoying thing</h2>
<p>Since google rate limits your searches, I had to use a VPN to change every 3
questions during a game because I was doing upwards of 40 google searches for
each question, depending on the evaluation of the question. Also, since network
requests are relatively slow to CPU computation, I had to implement an immense
amount of multithreading to deal with the massive amount of network I/O that I
was executing for each question.</p>

<h2 id="what-i-learned">What I learned</h2>
<ul>
  <li>Gradient Boosting and LightGBM</li>
  <li>NLP with <a href="https://spacy.io/">spaCy</a></li>
  <li>Machine Learning Features</li>
  <li>Websockets</li>
  <li>TF-IDF / Cosine Similarity</li>
  <li>Multithreading network requests</li>
  <li>Lots of Python</li>
</ul>

<h2 id="conclusion">Conclusion</h2>
<p>After months of testing and gathering data to train my supervised model, I was
able to get about a ~80% accuracy rate (which is not that great if you think
about the chance of getting 12 right in a row .8 ^ 12 = .0687) and at an average
time of ~7 seconds per questions. I gathered a total of 629 questions. An I was
also able to win one game worth $53.19 dollars (note that its not my name
because it was 3 of us and we decided to split on the last questions to
guarantee a win)!</p>

<p><img src="/assets/image/hqtrivia/win.jpg" alt="Yay!" /></p>

<p>All the gathered questions, mode, and source code can be found <a href="https://github.com/dphuang2/hqtrivia-solver">here</a> :)!</p>

  </section>

  <section class="profile">
    <div class="profile__card">
      <div class="profile__img">
        <figure class="post_card_img absolute-bg"></figure>
      </div>
      <div class="profile__container">
        <p>Web Apps, Vim, Computers, and Dogs. <br><i><span id="sj-quote">"Everything around you that you call life was made up by people that were no smarter than you and you can change it, you can influence it, you can build your own things that other people can use. Once you learn that, you'll never be the same again."</span></i> ~ Steve Jobs</p>
        
          <ul class="profile__social">
            
              <li><a class="fa fa-lg fa-envelope-o" href="mailto:dylan.p.huang@gmail.com"></a></li>
            
            
              <li><a class="fa fa-lg fa-github" href="https://github.com/dphuang2" target="_blank"></a></li>
            
              <li><a class="fa fa-lg fa-linkedin" href="https://www.linkedin.com/in/dphuang2" target="_blank"></a></li>
            
              <li><a class="fa fa-lg fa-youtube" href="https://www.youtube.com/user/Balphis/videos" target="_blank"></a></li>
            
              <li><a class="fa fa-lg fa-file-text-o" href="/DylanHuangResume.pdf" target="_blank"></a></li>
            
          </ul>
        
      </div>
    </div>
  </section>

</article>


  <section class="next">
    <a class="next__link" href="/2017/05/22/arm/" style="background-image: url('/assets/image/arm/arm_interns.jpg');">
      <div class="next__container">
        <span>Read Next</span>
        <h2>Arm Internship</h2>
      </div>
    </a>
  </section>


    </main>

    <div id="gh-wrapper">
  <div id="feed"></div>
  <div id="gh-button">Github activity</div>
</div>
 

    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mustache.js/0.7.2/mustache.min.js"></script>
<script type="text/javascript" src="/assets/js/github-activity.js"></script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/wow/1.1.2/wow.min.js"></script>
<script type="text/javascript" src="/assets/js/app.js"></script>
<script type="text/javascript" src="/assets/js/modernizr-custom.js"></script>




  </body>


</html>
